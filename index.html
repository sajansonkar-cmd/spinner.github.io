<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customizable Spinning Wheel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex-grow: 1;
        }
        #spinnerCanvas {
            transition: transform 5s cubic-bezier(0.25, 0.1, 0.25, 1);
        }
        .hover-lift:hover {
            transform: scale(1.1);
        }
        .transition-transform {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100">

    <header class="bg-white shadow-md">
        <div class="max-w-4xl mx-auto py-4 px-4 md:px-6">
            <h1 class="text-3xl font-bold text-gray-800">The Decider</h1>
            <p class="text-gray-500 mt-1">Create your own wheel for decisions, games, or fun!</p>
        </div>
    </header>

    <main class="w-full">
        <div class="w-full max-w-4xl mx-auto p-4 md:p-6 grid grid-cols-1 lg:grid-cols-3 gap-8 my-8">
            <div class="lg:col-span-1 bg-white p-6 rounded-2xl shadow-lg h-fit">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Wheel Customizer</h2>
                <p class="text-gray-500 mb-6">Add or remove items for the wheel.</p>
                <div class="flex items-center space-x-2 mb-4">
                    <input type="text" id="itemInput" placeholder="Enter new item..." class="flex-grow w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                    <button id="addButton" class="bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-200">Add</button>
                </div>
                <div id="itemList" class="space-y-2"></div>
            </div>

            <div class="lg:col-span-2 flex flex-col items-center justify-center bg-white p-6 rounded-2xl shadow-lg">
                <div class="relative w-full max-w-md aspect-square mb-8">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 w-0 h-0 border-l-[15px] border-l-transparent border-r-[15px] border-r-transparent border-t-[25px] border-t-indigo-600 z-10 drop-shadow-md"></div>
                    <div class="w-full h-full">
                        <canvas id="spinnerCanvas" width="500" height="500" class="w-full h-full object-contain rounded-full"></canvas>
                    </div>
                </div>

                <!-- Spin Button -->
                <div class="w-full max-w-md">
                     <button id="spinButton" class="w-full bg-indigo-600 text-white font-bold py-4 px-4 rounded-xl text-2xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform duration-200 ease-in-out hover:scale-105 active:scale-95 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:scale-100">
                        SPIN THE WHEEL
                    </button>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="bg-white shadow-md mt-auto">
        <div class="max-w-4xl mx-auto py-5 px-4 md:px-6 text-center text-gray-500">
            <p class="mb-2">&copy; 2024 The Decider. All Rights Reserved.</p>
            <p class="mb-3">Designed & Developed by <span class="font-semibold text-indigo-600 inline-block transition-transform hover-lift">cipher_ranjha</span></p>
            <div class="flex justify-center items-center space-x-6">
                <a href="https://www.linkedin.com/in/sajan-sonkar/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-indigo-600 transition-transform hover-lift" aria-label="LinkedIn Profile">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                </a>
                <a href="https://www.instagram.com/cipher_ranjha?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-indigo-600 transition-transform hover-lift" aria-label="Instagram Profile">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664 4.771 4.919 4.919 1.266-.058 1.644-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689-.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.44-1.441-1.44z"/></svg>
                </a>
            </div>
        </div>
    </footer>

    <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center hidden z-50 p-4">
        <div class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-sm w-full">
            <h2 class="text-xl text-gray-500 mb-2">The wheel has spoken!</h2>
            <p id="winnerText" class="text-4xl font-bold text-indigo-600 mb-6 break-words"></p>
            <button id="closeModalButton" class="bg-indigo-600 text-white font-semibold px-6 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition">Awesome!</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('spinnerCanvas');
            const ctx = canvas.getContext('2d');
            const itemInput = document.getElementById('itemInput');
            const addButton = document.getElementById('addButton');
            const itemList = document.getElementById('itemList');
            const spinButton = document.getElementById('spinButton');
            
            const resultModal = document.getElementById('resultModal');
            const winnerText = document.getElementById('winnerText');
            const closeModalButton = document.getElementById('closeModalButton');

            let items = ['Prize 1', 'Try Again', 'Bonus', 'Spin Again', 'Jackpot', 'Free Spin'];
            const colors = ['#6366F1', '#8B5CF6', '#EC4899', '#F59E0B', '#10B981', '#3B82F6', '#EF4444'];
            let currentRotation = 0;
            let isSpinning = false;

            const drawSpinner = () => {
                const numItems = items.length;
                if (numItems === 0) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    spinButton.disabled = true;
                    return;
                };
                spinButton.disabled = false;

                const anglePerItem = (2 * Math.PI) / numItems;
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const radius = canvas.width / 2 - 10; // Padding

                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.font = 'bold 20px Inter';
                ctx.textBaseline = 'middle';
                ctx.textAlign = 'center';

                items.forEach((item, i) => {
                    const startAngle = i * anglePerItem;
                    const endAngle = startAngle + anglePerItem;

                    // Draw segment
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                    ctx.closePath();
                    ctx.fillStyle = colors[i % colors.length];
                    ctx.fill();
                    ctx.strokeStyle = '#FFFFFF';
                    ctx.lineWidth = 4;
                    ctx.stroke();

                    // Draw text
                    ctx.save();
                    ctx.fillStyle = '#FFFFFF';
                    const textAngle = startAngle + anglePerItem / 2;
                    ctx.translate(centerX, centerY);
                    ctx.rotate(textAngle);
                    
                    ctx.fillText(item.length > 15 ? item.substring(0, 13) + '...' : item, radius * 0.65, 0);
                    ctx.restore();
                });
            };

            const updateItemList = () => {
                itemList.innerHTML = '';
                if (items.length === 0) {
                    const placeholder = document.createElement('p');
                    placeholder.textContent = 'Add an item to get started!';
                    placeholder.className = 'text-center text-gray-400';
                    itemList.appendChild(placeholder);
                    return;
                }
                items.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'flex justify-between items-center bg-gray-100 p-2 rounded-lg';
                    
                    const textSpan = document.createElement('span');
                    textSpan.textContent = item;
                    textSpan.className = 'text-gray-700';
                    itemElement.appendChild(textSpan);

                    const removeButton = document.createElement('button');
                    removeButton.innerHTML = '&times;';
                    removeButton.className = 'text-red-500 font-bold text-xl hover:text-red-700 px-2';
                    removeButton.onclick = () => { // CORRECTED THIS LINE
                        items.splice(index, 1);
                        updateUI();
                    };
                    itemElement.appendChild(removeButton);
                    itemList.appendChild(itemElement);
                });
            };

            const handleAddItem = () => {
                const newItem = itemInput.value.trim();
                if (newItem) {
                    items.push(newItem);
                    itemInput.value = '';
                    updateUI();
                }
            };
            
            const updateUI = () => {
                updateItemList();
                drawSpinner();
            };
            
            const spinWheel = () => {
                if (isSpinning || items.length === 0) return;

                isSpinning = true;
                spinButton.disabled = true;

                const spinDegrees = Math.random() * 2000 + 2000;
                currentRotation += spinDegrees;
                
                canvas.style.transform = `rotate(${currentRotation}deg)`;
            };

            // Event Listeners
            addButton.addEventListener('click', handleAddItem);
            itemInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleAddItem();
                }
            });

            spinButton.addEventListener('click', spinWheel);

            canvas.addEventListener('transitionend', () => {
                isSpinning = false;
                spinButton.disabled = false;

                const numItems = items.length;
                const anglePerItem = 360 / numItems;
                const finalAngle = currentRotation % 360;
                const winningAngle = (360 - finalAngle) % 360;
                const winningIndex = Math.floor(winningAngle / anglePerItem);
                
                const winner = items[winningIndex];
                
                winnerText.textContent = winner;
                resultModal.classList.remove('hidden');
            });

            closeModalButton.addEventListener('click', () => {
                resultModal.classList.add('hidden');
            });

            // Initial setup
            updateUI();
        });
    </script>
</body>
</html>

